<!DOCTYPE html>

<head>
  <link rel="stylesheet" href="../style.css" />
  <title>Code of Conduct: The Game</title>
	<script src="/vex.combined.js"></script>
	<script>vex.defaultOptions.className = 'vex-theme-default'</script>
	<link rel="stylesheet" href="/vex.css" />
	<link rel="stylesheet" href="/vex-theme-default.css" />
</head>

<body class="canvas">
  <canvas id="canvas"></canvas>
  <div class="bg">
    <div class="counter">
      Nice! You just won...<br /><br /><br />
      <div class="points-scored">---</div>
      <br /><br /><br />
      points!
      <div class="colors-won"></div>
    </div>
    <button onclick="window.location.href = '../main.html'">Proceed...</button>
  </div>
  <div class="points">0</div>
  <div class="rpg">
    <div class="youbutnot">
      <div class="you"></div>
      <span class="you-talk">*Knocks*</span>
    </div>
    <br /><br /><br />
    <div class="notyou">
      <div>
      <img src />
      </div>
      <span class="edna-talk"></span>
    </div>
    <button onclick="nextDialogue()" class="next-dialogue">Next</button>
  </div>
  <script src="../maps.js"></script>
  <script>
    map_data = maps.forest;
  </script>
  <!-- The core Firebase JS SDK is always required and must be listed first -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>

  <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
  <!-- TODO: Add SDKs for Firebase products that you want to use
     https://firebase.google.com/docs/web/setup#available-libraries -->

  <script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
			apiKey: "NeverGonnaGiveYouUp",
			authDomain: "NeverGOnnaLetYouDown",
			projectId: "no",
			storageBucket: "blablabla",
			messagingSenderId: "ooh",
			appId: "abcdefu",
			measurementId: "nothin' hereeeeeee",
		};
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    let provider = new firebase.auth.GoogleAuthProvider();

    let name = "",
      email = "";
    function checkAuthState() {
      firebase.auth().onAuthStateChanged((user) => {
         if (user) {
          name = user.displayName;
          email = user.email;
          if (name) {
            //music
            let db = firebase.firestore()
            let audio = ''
            var docRef = db.collection("players").doc(name.toString());

            docRef.get().then((doc) => {
              if (doc.exists) {
                console.log(doc.data())

                audio = doc.data().music
              }
            }).catch((error) => {
              console.log("Error getting document:", error);
            });





            const music = new Audio(audio);

            music.play()
          } else {
            console.log('no name')
          }
        } else {
          window.location.href = "../index.html"
        }
      });
    }

    checkAuthState();
    // Initialize Cloud Firestore and get a reference to the service
 
  </script>
  <script src="../main.js"></script>

</body>
